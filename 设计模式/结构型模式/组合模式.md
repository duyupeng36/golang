# 组合模式

将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象
的使用具有一致性

角色
1. 抽象组件
2. 叶子组件
3. 复合组件
4. 客户端

![](../.img/组合模式.png)

适用场景
1. 表示对象的“部分-整体”层次结构
2. 希望用户忽略组合对象与单个对象的不同，统一使用

优点
1. 定义了包含基本对象和组合对象的类层次结构
2. 简化客户端代码，客户端代码可以一致的使用组合对象和单个对象
3. 更容易增加类型的组件

```python
# 将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性

# 要使得单个对象和成组对象有共同的接口，

from abc import ABCMeta, abstractmethod


class Graphic(metaclass=ABCMeta):

    @abstractmethod
    def draw(self):
        pass


class Point(Graphic):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __str__(self):
        return "点(%s, %s)" % (self.x, self.y)

    def draw(self):
        print(self)


class Line(Graphic):
    def __init__(self, p1, p2):
        self.p1 = p1
        self.p2 = p2

    def __str__(self):
        return "线段[%s, %s]" % (self.p1, self.p2)

    def draw(self):
        print(self)


class Picture(Graphic):

    def __init__(self, iterable):
        self.children = []
        for g in iterable:
            self.add(g)

    def add(self, graphic):
        self.children.append(graphic)
        return self

    def draw(self):
        for g in self.children:
            g.draw()


if __name__ == '__main__':
    line = Line(Point(1, 1), Point(1, 2))
    Picture([line, Point(1, 3), Point(3, 3)]).add(Line(Point(3, 4), Point(5, 6))).draw()
```


